```mermaid
flowchart TD

A[User opens app] --> B{Authenticated}
B -->|No| L1[Login]
L1 --> L2[Login success]
L2 --> H[Home]

B -->|Yes| H[Home]

H --> M{Main Menu}
M --> HOME[Home]
M --> GAMES[Games]
M --> VIDEOS[Videos]
M --> RANK[Ranking]
M --> LOGOUT[Logout]

GAMES --> TLIST[Topic list]
TLIST --> TDETAIL[Topic detail]
TDETAIL --> MGSEL[Minigame selection]

MGSEL --> LST_A[Listening - Listen and Tap]
MGSEL --> LST_B[Listening - Listen and Choose Word]
MGSEL --> SPK[Speaking - Speak Match]
MGSEL --> DND[Matching - Drag and Drop]
MGSEL --> SENT[Sentence Builder]
MGSEL --> HNS[Hide and Seek]

subgraph Common_Game_Loop[Common game loop]
GI[Game intro] --> GP[Gameplay]
GP -->|Complete| RS[Result and rewards]
GP -->|Time up| FAIL[Fail screen]
RS --> RV[Review time]
RV --> NX{Next action}
FAIL --> NX
NX -->|Play again| GP
NX -->|Back to games| MGSEL
NX -->|Next level| GI
end

LST_A --> GI
LST_B --> GI
SPK --> GI
DND --> GI
SENT --> GI
HNS --> GI

VIDEOS --> VHOME[Video home]
VHOME --> VPLAYER[Lesson player]
VPLAYER --> VQUIZ[Lesson quiz]
VHOME --> OFFLIB[Offline library and downloads]
OFFLIB --> VSET[Video settings]

RANK --> R1[Ranking screen]
HOME --> H
```